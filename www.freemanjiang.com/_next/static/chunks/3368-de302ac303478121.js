"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3368],{94385:(e,t,l)=>{l.d(t,{default:()=>_});var n=l(95155),a=l(12115),i=l(75307),s=l(21567);let r=a.forwardRef((e,t)=>{let{className:l,...a}=e;return(0,n.jsxs)(i.bL,{ref:t,className:(0,s.cn)("relative flex w-full touch-none select-none items-center group",l),...a,children:[(0,n.jsx)(i.CC,{className:"relative h-[4px] w-full grow overflow-hidden rounded-full bg-zinc-50/35",children:(0,n.jsx)(i.Q6,{className:"absolute h-full bg-white"})}),(0,n.jsx)(i.zi,{className:(0,s.cn)("opacity-0 group-hover:opacity-100 block h-2 w-2 rounded-full bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-0 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{"group-hover:opacity-0":a.disabled})})]})});r.displayName=i.bL.displayName;var o=l(66406),c=l(22725),u=l(29191),d=l(42410),f=l(5565),m=l(48173),g=l.n(m),h=l(38576),p=l(76386),x=l.n(p),v=l(11536),b=l(87081);function _(e){let{audioSrc:t,albumR2Key:l,title:i,artists:m,mainUrl:p,soundcloudUrl:_,spotifyUrl:w,youtubeUrl:y}=e,[j,N]=(0,a.useState)(!1),[k,C]=(0,a.useState)(null),[F,S]=(0,a.useState)(0),[A,E]=(0,a.useState)(0),[B,z]=(0,a.useState)(!1),[L,M]=(0,a.useState)(!1),[P,R]=(0,a.useState)(0),[W,G]=(0,a.useState)(!1),I=(0,a.useRef)(null),[T,D]=(0,a.useState)(0),[Q,V]=(0,a.useState)(0);(0,a.useEffect)(()=>{I.current&&(D(I.current.scrollWidth),V(I.current.clientWidth))},[i]);let q=T>Q,X=T-Q,$=X/4;console.log("scrollDuration",$),(0,a.useEffect)(()=>{var e;if(null==k?void 0:null===(e=k.audioEl)||void 0===e?void 0:e.current){let e=k.audioEl.current;e.duration&&S(e.duration);let t=()=>{S(e.duration)};return e.addEventListener("loadedmetadata",t),()=>{e.removeEventListener("loadedmetadata",t)}}},[k]);let H=e=>{let t=Math.floor(e/60),l=Math.floor(e%60);return"".concat(t,":").concat(l.toString().padStart(2,"0"))},J=(0,o.v)(l);return(0,n.jsxs)("div",{className:"w-full h-[152px] bg-[#1F1F1F] rounded-xl p-4 pt-3 flex flex-col gap-2 relative",children:[(0,n.jsx)(x(),{ref:e=>C(e),src:t.url,controls:!1,listenInterval:500,onListen:e=>{E(e)},onPlay:()=>{N(!0),z(!0),h.Ay.capture("audio_player_play",{main_url:p,song_title:i,song_album:l,current_time:A})},onPause:()=>{N(!1),h.Ay.capture("audio_player_pause",{main_url:p,song_title:i,song_album:l,current_time:A})},onEnded:()=>{E(0),h.Ay.capture("audio_player_complete",{main_url:p,song_title:i,song_album:l,duration:F})}}),(0,n.jsxs)("div",{className:"absolute top-3 right-3 text-white flex items-center gap-2",children:[y&&(0,n.jsx)(g(),{href:y,target:"_blank",onClick:()=>h.Ay.capture("audio_player_youtube_click",{main_url:p,song_title:i,song_album:l}),className:"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-500 rounded",children:(0,n.jsx)(v.Vk6,{className:"w-6 h-6 cursor-pointer transition-all hover:text-red-500"})},"youtube"),_&&(0,n.jsx)(g(),{href:_,target:"_blank",onClick:()=>h.Ay.capture("audio_player_soundcloud_click",{main_url:p,song_title:i,song_album:l}),className:"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-orange-400 rounded",children:(0,n.jsx)(v.SWP,{className:"w-6 h-6 cursor-pointer transition-all hover:text-orange-400"})},"soundcloud"),w&&(0,n.jsx)(g(),{href:w,target:"_blank",onClick:()=>h.Ay.capture("audio_player_spotify_click",{main_url:p,song_title:i,song_album:l}),className:"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-green-400 rounded",children:(0,n.jsx)(v.geR,{className:"w-[1.35rem] h-[1.35rem] cursor-pointer transition-all hover:text-green-400"})},"spotify")]}),(0,n.jsxs)("div",{className:"flex gap-2.5",children:[(0,n.jsxs)("a",{href:p,target:"_blank",onClick:()=>h.Ay.capture("audio_player_album_click",{main_url:p,song_title:i,song_album:l}),className:(0,s.cn)("flex-shrink-0 block relative aspect-square h-24 w-24 rounded-lg overflow-hidden focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/50",!W&&"cursor-default"),children:[!W&&(0,n.jsx)(b.r,{className:"w-full h-full z-20 brightness-20"}),(0,n.jsx)(d.P.div,{initial:{filter:"blur(4px)"},animate:W?{filter:"blur(0px)"}:{},transition:{duration:.7},className:"relative w-full h-full",children:(0,n.jsx)(f.default,{priority:!1,loading:"lazy",sizes:"(max-width: 768px) 20vw, 10vw",src:J,onLoad:()=>{G(!0)},alt:"Album cover",fill:!0,className:(0,s.cn)("rounded-lg object-cover transition-all duration-300 hover:brightness-85",!W&&"opacity-0")})})]}),(0,n.jsx)("div",{className:"flex flex-col justify-between flex-grow pt-6 overflow-hidden",children:(0,n.jsxs)("div",{className:"space-y-1 relative",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("div",{className:(0,s.cn)("absolute inset-0 pointer-events-none z-10",{hidden:!q}),children:[(0,n.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-2.5 bg-gradient-to-r from-[#1F1F1F] to-transparent"}),(0,n.jsx)("div",{className:"absolute right-0 top-0 bottom-0 w-2.5 bg-gradient-to-l from-[#1F1F1F] to-transparent"})]}),(0,n.jsx)(d.P.a,{ref:I,className:"text-white text-sm font-semibold hover:underline focus-visible:underline focus:outline-none whitespace-nowrap block",href:p,target:"_blank",onClick:()=>h.Ay.capture("audio_player_title_click",{main_url:p,song_title:i,song_album:l}),animate:q?{x:[0,0,-X-7,-X-7,0]}:{},transition:q?{duration:$,repeat:1/0,repeatType:"loop",ease:"linear",times:[0,.2,.5,.7,1]}:{},children:i})]}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsxs)("div",{className:(0,s.cn)("absolute inset-0 pointer-events-none z-10",{hidden:!q}),children:[(0,n.jsx)("div",{className:"absolute left-0 top-0 bottom-0 w-2.5 bg-gradient-to-r from-[#1F1F1F] to-transparent"}),(0,n.jsx)("div",{className:"absolute right-0 top-0 bottom-0 w-2.5 bg-gradient-to-l from-[#1F1F1F] to-transparent"})]}),(0,n.jsx)("div",{className:"text-[#878787] text-sm line-clamp-1 overflow-ellipsis",children:m.map((e,t)=>{let{name:s,artistUrl:r}=e;return(0,n.jsxs)(a.Fragment,{children:[t>0&&", ",(0,n.jsx)(g(),{className:"hover:text-[#BCBCBC] hover:underline focus-visible:text-[#BCBCBC] focus-visible:underline focus-visible:outline-none",href:r,target:"_blank",onClick:()=>h.Ay.capture("audio_player_artist_click",{main_url:p,song_title:i,song_album:l,artist_name:s,artist_url:r}),children:s})]},s)})})]})]})})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex flex-1 relative h-5",style:{isolation:"isolate"},onMouseMove:e=>{let t=e.currentTarget.getBoundingClientRect();R(Math.min(Math.max((e.clientX-t.left)/t.width,0),1)*F)},onMouseEnter:()=>M(!0),onMouseLeave:()=>M(!1),children:[B&&L&&(0,n.jsx)("div",{className:"absolute bottom-[1.1rem] text-white text-[11px] px-3 py-[0.4rem] rounded-lg bg-[#242424]",style:{left:"".concat(P/F*100,"%"),transform:"translate3d(-50%, 0, 0)",boxShadow:"0 4px 8px 0 rgba(0,0,0,0.3)",zIndex:1,fontFeatureSettings:"'tnum' on"},children:H(P)}),(0,n.jsx)(r,{className:"w-full",value:[A],max:F,step:1,onValueChange:e=>{if(k){let t=e[0];k.audioEl.current.currentTime=t,E(t),h.Ay.capture("audio_player_seek",{main_url:p,song_title:i,song_album:l,seek_to:t,seek_from:A})}},disabled:!B})]}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("div",{className:"text-[#B7B7B7] text-[0.8rem] tracking-wide w-14 text-right",children:B?"-".concat(H(F-A)):0===F?"":H(F)}),(0,n.jsx)("button",{onClick:()=>{h.Ay.capture("audio_player_click",{main_url:p,song_title:i,song_album:l}),k&&(j?k.audioEl.current.pause():k.audioEl.current.play())},className:"hover:scale-110 focus:outline-none focus:ring-2 focus:ring-white/50 focus:ring-offset-2 focus:ring-offset-zinc-900 transition-all duration-300 cursor-pointer rounded-full flex items-center justify-center bg-white w-[1.83rem] h-[1.83rem] -mt-1.5",children:j?(0,n.jsx)(c.A,{className:"w-[1.05rem] h-[1.05rem] fill-zinc-900 stroke-none"}):(0,n.jsx)(u.A,{className:"w-4 h-4 fill-zinc-900 stroke-none"})})]})]})]})}},24856:(e,t,l)=>{l.r(t),l.d(t,{ProgressiveLoad:()=>r});var n=l(95155);let a={sm:640,md:768,lg:1024,xl:1280,"2xl":1536};var i=l(42410),s=l(12115);let r=e=>{let{children:t,delay:l=0,className:r}=e,[o,c]=(0,s.useState)(null);return((0,s.useEffect)(()=>{c(function(e){if("number"==typeof e)return e;if(!("base"in e))throw Error("Base breakpoint is not defined");let t=window.innerWidth;return t>=a["2xl"]&&void 0!==e["2xl"]?e["2xl"]:t>=a.xl&&void 0!==e.xl?e.xl:t>=a.lg&&void 0!==e.lg?e.lg:t>=a.md&&void 0!==e.md?e.md:t>=a.sm&&void 0!==e.sm?e.sm:e.base}(l))},[l]),null===o)?null:(0,n.jsx)(i.P.div,{initial:{opacity:0,y:16,filter:"blur(4px)"},animate:{opacity:1,y:0,filter:"blur(0px)"},transition:{delay:o/2e3,duration:.75},className:r,children:t})}},87081:(e,t,l)=>{l.d(t,{r:()=>r});var n=l(95155),a=l(21567),i=l(75927).hp;let s=(e,t)=>'\n<svg width="'.concat(e,'" height="').concat(t,'" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n  <defs>\n    <linearGradient id="g">\n      <stop stop-color="#fafafa" offset="20%" />\n      <stop stop-color="#f5f5f5" offset="50%" />\n      <stop stop-color="#fafafa" offset="70%" />\n    </linearGradient>\n    <filter id="blur">\n      <feGaussianBlur stdDeviation="3" />\n    </filter>\n  </defs>\n  <rect width="').concat(e,'" height="').concat(t,'" fill="#fafafa" />\n  <rect id="r" width="').concat(e,'" height="').concat(t,'" fill="url(#g)" filter="url(#blur)" />\n  <animate \n    xlink:href="#r" \n    attributeName="x" \n    from="-').concat(e,'" \n    to="').concat(e,'" \n    dur="1.2s" \n    repeatCount="indefinite"\n  />\n</svg>');function r(e){let{className:t,...l}=e;return(0,n.jsx)("div",{ref:e=>{if(e){let{width:t,height:l}=e.getBoundingClientRect();e.style.backgroundImage="url('data:image/svg+xml;base64,".concat(i.from(s(t,l)).toString("base64"),"')")}},className:(0,a.cn)("rounded-md",t),...l})}},66406:(e,t,l)=>{l.d(t,{v:()=>n});let n=e=>"https://r2.photos.freemanjiang.com/".concat(e)},21567:(e,t,l)=>{l.d(t,{cn:()=>i});var n=l(43463),a=l(69795);function i(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];return(0,a.QP)((0,n.$)(t))}}}]);